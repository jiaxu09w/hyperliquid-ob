# ════════════════════════════════════════════════════════════════════════════
#                        OB Trading System - Configuration
# ════════════════════════════════════════════════════════════════════════════

# ════════════════════════════════════════════════════════════════════════════
# Appwrite Configuration
# ════════════════════════════════════════════════════════════════════════════
APPWRITE_ENDPOINT=https://syd.cloud.appwrite.io/v1
APPWRITE_PROJECT_ID=690458650028f7468ce7
APPWRITE_API_KEY=standard_c26d34bb43c25c3233d78a4a66fe9ba165a8061691a4a79098161f9d57e127482108e034e1e99e337deab3e6bb75c36fc9364f5abb25c1d3d67afe7e2eb26d34b88e901121d7b2753c670936adbd8bd1cebbc1ac451752b7cfb22a36bed0bb56253ae147c77ae7560a749ce2018b1a75dffdbf2325777879d0783372f10607c7
APPWRITE_DATABASE_ID=6904590d000f3e9157ba

# ════════════════════════════════════════════════════════════════════════════
# Trading Configuration
# ════════════════════════════════════════════════════════════════════════════
TRADING_SYMBOL=BTCUSDT                  # Trading pair
TRADING_ENABLED=false                   # ⚠️ Set to 'true' for LIVE trading

# ════════════════════════════════════════════════════════════════════════════
# Hyperliquid Configuration
# ════════════════════════════════════════════════════════════════════════════
HYPERLIQUID_PRIVATE_KEY=0xa5e8f11799b46fe709824a7f79811020384fcd140fbbcf3f190f24f362d59cd0           # Your testnet/mainnet private key
                                        # Leave empty for pure mock mode

# ════════════════════════════════════════════════════════════════════════════
# Risk Management
# ════════════════════════════════════════════════════════════════════════════
LEVERAGE=3                              # Leverage multiplier (1-50)
RISK_PER_TRADE=1.5                      # Risk per trade (% of actual balance, NOT leveraged)
                                        # Example: $10,000 balance → $150 risk per trade

# ════════════════════════════════════════════════════════════════════════════
# Entry Strategy - Smart Mixed Entry
# ════════════════════════════════════════════════════════════════════════════

# 🎯 Smart Entry Logic:
# - Slippage < 0.5% → Market order (fast execution)
# - Slippage 0.5-2% → Limit order (better price)
# - Slippage > 2%   → Skip (avoid chasing)

MAX_SLIPPAGE_MARKET=0.5                 # Max slippage for market order (%)
MAX_SLIPPAGE_LIMIT=1.0                  # Max slippage for limit order (%)
LIMIT_ORDER_WAIT_TIME=240                # Limit order timeout (seconds)
LIMIT_PRICE_ADJUSTMENT=0.3              # Limit price adjustment (%)
                                        # Limit price = Breakout price ± 0.3%

# OB Confidence Filter
REQUIRE_HIGH_CONFIDENCE=false           # true = only trade high confidence OBs

# ⚡ Stop Loss Strategy: AGGRESSIVE (OB Edge)
# Long:  Stop = OB.bottom (no ATR buffer)
# Short: Stop = OB.top (no ATR buffer)

# ════════════════════════════════════════════════════════════════════════════
# Pyramiding (Add to Position)
# ════════════════════════════════════════════════════════════════════════════
MAX_ADDITIONS=2                         # Maximum number of additions (0-5)
SCALE_DOWN_FACTOR=0.5                   # Size scale down factor (0.3-1.0)
                                        # 0.5 = each addition is 50% of previous
MIN_PROFIT_FOR_ADDITION=1.0             # Minimum profit % to allow addition

# Example:
# Initial: 0.1 BTC (risk $150)
# Add 1:   0.05 BTC (risk $75)  ← after 1% profit
# Add 2:   0.025 BTC (risk $37.5) ← after 1% profit

# ════════════════════════════════════════════════════════════════════════════
# Exit Strategy (Position Monitor)
# ════════════════════════════════════════════════════════════════════════════
ENTRY_TIMEFRAME=4h                      # Entry timeframe for OB detection
HTF_TARGETS=1d,1w                       # Higher timeframe targets (comma separated)

# Exit Rules:
# 1. Same timeframe (4h) reversal OB → Close 100%
# 2. HTF (1d/1w) reversal OB → Close 50%
# 3. Trailing stop → Update dynamically

PARTIAL_EXIT_PERCENT=50                 # HTF exit percentage (0-100)

# ════════════════════════════════════════════════════════════════════════════
# Trailing Stop
# ════════════════════════════════════════════════════════════════════════════
USE_TRAILING_STOP=true                  # Enable/disable trailing stop
TRAILING_STOP_TRIGGER=3                 # Activate after X% profit
TRAILING_STOP_DISTANCE=1.5              # Distance from current price (%)

# Example:
# Entry: $60,000
# Current: $61,800 (3% profit) → Trailing stop activated
# Stop: $61,800 - 1.5% = $60,873

# ════════════════════════════════════════════════════════════════════════════
# API Reliability
# ════════════════════════════════════════════════════════════════════════════
API_TIMEOUT=10000                       # API timeout (milliseconds)
MAX_RETRIES=3                           # Maximum retry attempts

# ════════════════════════════════════════════════════════════════════════════
# Email Notification
# ════════════════════════════════════════════════════════════════════════════
EMAIL_ENABLED=true                      # Enable email notifications
EMAIL_RECIPIENT=jiaxu99.w@gmail.com    # Recipient email address

# Gmail Configuration (requires App Password)
EMAIL_USER=jiaxu99.w@gmail.com    # Gmail account
EMAIL_APP_PASSWORD=hqmv qwbm qpik juiq  # Gmail App Password (16 characters)
                                        # Get it from: https://myaccount.google.com/apppasswords

# ════════════════════════════════════════════════════════════════════════════
# Scanner Configuration (for reference)
# ════════════════════════════════════════════════════════════════════════════
OB_SWING_LENGTH=10                      # Swing detection period
VOLUME_LOOKBACK=20                      # Volume comparison period
VOLUME_METHOD=percentile                # percentile, sma, ema, stddev
VOLUME_PARAM=70                         # Threshold parameter (percentile: 70 = top 30%)

# ════════════════════════════════════════════════════════════════════════════
# Development
# ════════════════════════════════════════════════════════════════════════════
NODE_ENV=production                     # development | production

# ════════════════════════════════════════════════════════════════════════════
# Example Configurations
# ════════════════════════════════════════════════════════════════════════════

# Conservative (低风险):
# RISK_PER_TRADE=1.0
# MAX_ADDITIONS=1
# MAX_SLIPPAGE_MARKET=0.3
# MAX_SLIPPAGE_LIMIT=1.5
# TRAILING_STOP_TRIGGER=5
# TRAILING_STOP_DISTANCE=2.0

# Balanced (推荐):
# RISK_PER_TRADE=1.5
# MAX_ADDITIONS=2
# MAX_SLIPPAGE_MARKET=0.5
# MAX_SLIPPAGE_LIMIT=2.0
# TRAILING_STOP_TRIGGER=3
# TRAILING_STOP_DISTANCE=1.5

# Aggressive (高风险):
# RISK_PER_TRADE=2.0
# MAX_ADDITIONS=3
# MAX_SLIPPAGE_MARKET=1.0
# MAX_SLIPPAGE_LIMIT=3.0
# TRAILING_STOP_TRIGGER=2
# TRAILING_STOP_DISTANCE=1.0

# ════════════════════════════════════════════════════════════════════════════
# Notes
# ════════════════════════════════════════════════════════════════════════════
# - Always test with TRADING_ENABLED=false first
# - Start with small RISK_PER_TRADE (0.5-1%)
# - Monitor for at least 1-2 weeks before going live
# - Keep this file secure and never commit to version control